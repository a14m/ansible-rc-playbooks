---
- name: "Update localtime"
  become: true
  ansible.builtin.file:
    src: "/usr/share/zoneinfo/{{ settings_timezone }}"
    dest: "/etc/localtime"
    state: link

- name: "Update locale.conf"
  become: true
  ansible.builtin.copy:
    dest: "/etc/locale.conf"
    mode: "0644"
    content: |
      LANG={{ settings_locales_lang }}
      LANGUAGE={{ settings_locales_language }}
      LC_COLLATE={{ settings_locales_lc_collate }}
      LC_TIME={{ settings_locales_lc_time }}
      TIME_STYLE={{ settings_locales_time_style }}

- name: "Update locale.gen"
  become: true
  ansible.builtin.lineinfile:
    dest: "/etc/locale.gen"
    mode: "0644"
    regexp: "^#{{ item }}"
    line: "{{ item }}"
  with_items: "{{ settings_locales }}"
  notify: "Run locale-gen"
